import{j as e,d as x,r as g}from"./index-DkaJZGnT.js";function p({item:t,isLeft:s,evenYear:a,showMonth:r}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s?"timeline-mark mark-left":"timeline-mark mark-right"}),e.jsxs("div",{className:"card-container",style:s?{alignItems:"flex-end"}:void 0,children:[r&&e.jsx("div",{className:"timeline-date",children:new Date(t.releaseDate).toLocaleDateString("en-US",{month:"long"})}),e.jsxs("div",{className:a?"card even-year-card":"card",style:{alignItems:s?"flex-end":"flex-start"},children:[e.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",children:[t.hasOther&&(s?e.jsxs(e.Fragment,{children:[t.name,e.jsx(x,{className:"check-icon",style:{paddingLeft:"5px"}})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"check-icon",style:{paddingRight:"5px"}}),t.name]})),!t.hasOther&&t.name]}),t.text&&e.jsx("div",{className:"card-sub-text",children:t.text}),e.jsx("img",{className:"card-image",src:"/tamagotchi-resources/tamagotchi-device-images/"+t.image,alt:t.name})]})]})]})}function M({navHeight:t}){const[s,a]=g.useState({}),r=g.useRef(null);return g.useEffect(()=>{async function c(){try{const n=await fetch("/tamagotchi-resources/tamagotchi-timeline.json");if(!n.ok){const o=`HTTP error! status: ${n.status}`;console.error("Failed to fetch data:",o);return}const m=await n.json(),i=D(m);a(R(i))}catch(n){console.error("An unexpected error occurred while fetching data:",n)}}c().then()},[]),e.jsxs("div",{className:"timeline",children:[e.jsxs("div",{className:"title-container",children:[e.jsxs("div",{className:"title",style:{textAlign:"end"},children:[e.jsx("div",{className:"title-text",children:"Japanese"}),e.jsx("div",{className:"title-sub-text",style:{justifyContent:"flex-end"},children:"or Korean or Asian"}),e.jsxs("div",{className:"title-sub-text",style:{justifyContent:"flex-end"},children:[e.jsx(x,{className:"check-icon"}),e.jsx("div",{children:"- has English release"})]})]}),e.jsx("div",{className:"timeline-line",style:{borderRadius:"5px",margin:"10px",marginBottom:0}}),e.jsxs("div",{className:"title",children:[e.jsx("div",{className:"title-text",children:"English"}),e.jsx("div",{className:"title-sub-text",children:"American or European"}),e.jsxs("div",{className:"title-sub-text",children:[e.jsx(x,{className:"check-icon"}),e.jsx("div",{children:"- has Japanese release"})]})]})]}),Object.keys(s).sort((c,n)=>c.localeCompare(n)).map((c,n,m)=>{const i=Number(c),o=s[i],h=i%2===0,u=n<m.length-1?Number(m[n+1]):null,v=[];if(u&&u>i+1)for(let l=i+1;l<u;l++)v.push(l);return e.jsxs("div",{ref:r,className:h?"even-year":void 0,style:{"--nav-height":`${t}px`},children:[e.jsx("div",{className:`year ${h?"even-year":void 0}`,children:i}),o.map((l,d)=>{var j,N;return e.jsxs("div",{children:[e.jsxs("div",{className:"timeline-row",children:[e.jsx("div",{className:"row-item",children:l.asia&&e.jsx(p,{item:l.asia,isLeft:!0,evenYear:h,showMonth:d===0||!y(l.asia.releaseDate,(j=o[d-1].asia)==null?void 0:j.releaseDate)})}),e.jsx("div",{className:"timeline-line",style:{borderTopLeftRadius:d===0?"5px":void 0,borderTopRightRadius:d==0?"5px":void 0}}),e.jsx("div",{className:"row-item",children:l.international&&e.jsx(p,{item:l.international,isLeft:!1,evenYear:h,showMonth:d===0||!y(l.international.releaseDate,(N=o[d-1].international)==null?void 0:N.releaseDate)})})]}),e.jsxs("div",{className:"timeline-row",style:{height:"1rem"},children:[e.jsx("div",{className:"row-item"}),e.jsx("div",{className:"timeline-line",style:d===o.length-1?{borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px"}:void 0}),e.jsx("div",{className:"row-item"})]}),d===o.length-1&&e.jsx("div",{style:{height:"5px"}})]},"rows-"+i+"-"+d)}),v.map(l=>e.jsx("div",{className:`year ${l%2===0?"even-year":void 0}`,children:l},`gap-${l}`))]},i)})]})}function R(t){const s={};for(const a of t)s[a.year]||(s[a.year]=[]),s[a.year].push(a);return s}function f(t){return t.length>7?t.slice(0,7):t}function y(t,s){return s?f(t)===f(s):!1}function D(t){t.sort(b);const s=[];for(const a of t){const r=f(a.releaseDate),c=w(s,a,r);let n=!1;c&&(n=k(a,c,r)),n||E(a,s,r)}return s}function b(t,s){return new Date(t.releaseDate).getTime()-new Date(s.releaseDate).getTime()}function w(t,s,a){var c,n;let r=null;for(let m=t.length-1;m>=0;m--){const i=t[m],o=((c=i.asia)==null?void 0:c.releaseDate)??((n=i.international)==null?void 0:n.releaseDate);if(!o)continue;const h=f(o);if(h===a)(s.region==="asia"&&!i.asia||s.region==="international"&&!i.international)&&(r=i);else if(h<a)break}return r}function k(t,s,a){return t.region==="asia"&&!s.asia?(s.asia={...t,releaseDate:a},!0):t.region==="international"&&!s.international?(s.international={...t,releaseDate:a},!0):!1}function E(t,s,a){const r={asia:null,international:null,year:Number(a.slice(0,4))};t.region==="asia"?r.asia={...t,releaseDate:a}:r.international={...t,releaseDate:a},s.push(r)}export{M as default};
